<!DOCTYPE html>
<html>
<head>
  <title>Debug Panel</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-dark text-white p-4">
  <h2>ðŸŽ› Debug Panel</h2>

  <button class="btn btn-danger mb-3" onclick="clearQueue()">ðŸ§¹ Clear Queue</button>
 <label><input type="checkbox" id="autoplay-toggle"> Auto-play</label>


  <h5>Session State:</h5>
    <pre id="session-dump" class="bg-secondary p-3 rounded">
<!--{{ session_data | tojson(indent=2) }}-->
    </pre>
 <div class="container mt-3 text-white">
   <h2>Session Debug</h2>

   {% for key, value in session_data.items() %}
    <details class="mb-2">
      <summary style="cursor:pointer; font-weight:bold;">{{ key }}</summary>
      <pre style="white-space: pre-wrap; word-wrap: break-word;">{{ value | tojson(indent=2) }}</pre>
    </details>
  {% endfor %}
</div>







  <script>
    function clearQueue() {
      fetch('/clear_queue', { method: 'POST' })
        .then(() => location.reload());
    }

      const autoplay = document.getElementById("autoplay-toggle").checked;

if (data.was_empty && data.video && data.sheet) {
  source.src = data.video;
  player.load();
  document.getElementById("sheet-display").src = data.sheet;

  if (autoplay) {
    player.play();
  }
}



  </script>
<!--<script>-->
<!--  setInterval(() => {-->
<!--    fetch('/session-dump')-->
<!--      .then(r => r.json())-->
<!--      .then(data => {-->
<!--        document.getElementById('session-dump').textContent = JSON.stringify(data, null, 2);-->
<!--      });-->
<!--  }, 3000); // update every 3s-->
<!--</script>-->



</body>
</html>
